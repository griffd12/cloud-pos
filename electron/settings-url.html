<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Server URL</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; padding: 20px; background: #1a1a2e; color: #e0e0e0; margin: 0; }
    h3 { margin: 0 0 12px; font-size: 15px; color: #fff; }
    input { width: 100%; padding: 10px; border: 1px solid #333; border-radius: 6px; background: #16213e; color: #fff; font-size: 14px; box-sizing: border-box; margin-bottom: 16px; }
    input:focus { outline: none; border-color: #1a73e8; }
    .buttons { display: flex; gap: 8px; justify-content: flex-end; }
    button { padding: 8px 18px; border: none; border-radius: 6px; font-size: 13px; cursor: pointer; }
    .save { background: #1a73e8; color: #fff; }
    .save:hover { background: #1557b0; }
    .cancel { background: #333; color: #ccc; }
    .cancel:hover { background: #444; }
  </style>
</head>
<body>
  <h3>Enter Server URL</h3>
  <input id="url" type="text" placeholder="https://your-server.replit.app" autofocus />
  <div class="buttons">
    <button class="cancel" id="cancelBtn">Cancel</button>
    <button class="save" id="saveBtn">Save &amp; Connect</button>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      const data = await window.settingsAPI.getData();
      document.getElementById('url').value = data.currentUrl || '';

      document.getElementById('saveBtn').addEventListener('click', () => {
        const url = document.getElementById('url').value.trim();
        if (url) window.settingsAPI.saveUrl(url);
      });

      document.getElementById('cancelBtn').addEventListener('click', () => {
        window.close();
      });

      document.getElementById('url').addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          const url = document.getElementById('url').value.trim();
          if (url) window.settingsAPI.saveUrl(url);
        }
        if (e.key === 'Escape') window.close();
      });
    });
  </script>
</body>
</html>
